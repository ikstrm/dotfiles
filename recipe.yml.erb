resources:
  <%- homebrew_packages.each do |pkg| -%>
  <%- name, *options = pkg.split(' ') %>
  - type: homebrew_package
    name: <%= name %>
    options: <%= options.join(' ') %>
  <%- end -%>

  <%- homebrew_cask_packages.each do |name| -%>
  - type: homebrew_cask_package
    name: <%= name %>
    options: --appdir=/Applications
  <%- end -%>

  - type: rbenv_ruby
    version: 2.2.1

  - type: defaults
    domain: com.apple.dock
    key: orientation
    value: left
    notify:
      - restart_dock

  <%- dotfiles.each do |file| -%>
  - type: symlink
    destination: ~/src/github.com/k0kubun/dotfiles/linked/<%= file %>
    source: ~/<%= file %>
  <%- end -%>

  - type: script
    path: scripts/karabiner.sh
  - type: script
    path: scripts/karabiner_export.sh
  - type: script
    path: scripts/font.sh
    check_script: 'test -e ~/Library/Fonts/Monaco\ for\ Powerline.otf'

handlers:
  - id: restart_dock
    type: command
    script: killall Dock
